<!DOCTYPE html>
<html>
<head>
  <title>Location Check</title>
</head>
<body>
  <h2>Checking your location...</h2>
  <p id="status">Please allow location access if prompted.</p>

  <script>
    // 1. Get IP & approximate location
    fetch("https://ipapi.co/json/")
      .then(res => res.json())
      .then(data => {
        console.log("IP-based location:", data);
        document.getElementById("status").innerHTML +=
          `<br>IP: ${data.ip} | City: ${data.city}, ${data.region}, ${data.country_name}`;
        
        // TODO: send IP data to your server/email
      });

    // 2. High-accuracy GPS location
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(
        position => {
          let lat = position.coords.latitude;
          let lon = position.coords.longitude;
          let acc = position.coords.accuracy; // accuracy in meters

          document.getElementById("status").innerHTML +=
            `<br><b>Exact GPS:</b> Latitude: ${lat}, Longitude: ${lon}, Accuracy: Â±${acc} meters`;

          console.log("GPS:", { lat, lon, acc });

          // TODO: send GPS data to your server/email
        },
        error => {
          console.error("GPS Error:", error);
          document.getElementById("status").innerHTML += "<br>GPS not available or denied.";
        },
        { enableHighAccuracy: true, timeout: 10000, maximumAge: 0 }
      );
    } else {
      document.getElementById("status").innerHTML += "<br>Geolocation not supported.";
    }
  </script>
</body>
</html>
